import{c as Tt,j as M,aH as Ue,d as ot,M as Vt,n as _t,r as Nt,aI as jt,aJ as xt,ac as pt,u as Jt,e as Gt,B as Ct}from"./index-CAdrxu0-.js";import{a as Ht,F as Yt}from"./FullScreenModal-BIZTDvbl.js";import{B as ut,a as qt,G as yt,T as It}from"./Slide-Dorz5bm2.js";import{D as zt,a as Wt,b as Xt}from"./DialogContent-DpMfc2VJ.js";import{D as Qt}from"./DialogTitle-DzfyNCcq.js";const Zt=Tt(M.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));var Bt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mt=function(){return mt=Object.assign||function(p){for(var o,v=1,g=arguments.length;v<g;v++){o=arguments[v];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(p[u]=o[u])}return p},mt.apply(this,arguments)};function nt(f,p,o,v){function g(u){return u instanceof o?u:new o(function(s){s(u)})}return new(o||(o=Promise))(function(u,s){function j(w){try{a(v.next(w))}catch(P){s(P)}}function k(w){try{a(v.throw(w))}catch(P){s(P)}}function a(w){w.done?u(w.value):g(w.value).then(j,k)}a((v=v.apply(f,[])).next())})}function Qe(f,p){var o={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},v,g,u,s;return s={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function j(a){return function(w){return k([a,w])}}function k(a){if(v)throw new TypeError("Generator is already executing.");for(;o;)try{if(v=1,g&&(u=a[0]&2?g.return:a[0]?g.throw||((u=g.return)&&u.call(g),0):g.next)&&!(u=u.call(g,a[1])).done)return u;switch(g=0,u&&(a=[a[0]&2,u.value]),a[0]){case 0:case 1:u=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,g=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(a[0]===6||a[0]===2)){o=0;continue}if(a[0]===3&&(!u||a[1]>u[0]&&a[1]<u[3])){o.label=a[1];break}if(a[0]===6&&o.label<u[1]){o.label=u[1],u=a;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(a);break}u[2]&&o.ops.pop(),o.trys.pop();continue}a=p.call(f,o)}catch(w){a=[6,w],g=0}finally{v=u=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function er(f){var p=[f.schema.primKey].concat(f.schema.indexes);return p.map(function(o){return o.src}).join(",")}function tr(f){for(var p={},o=0,v=f.tables;o<v.length;o++){var g=v[o];p[g.name]=g.schema}return p}function Rt(f,p){return new Promise(function(o,v){var g=new FileReader;g.onabort=function(u){return v(new Error("file read aborted"))},g.onerror=function(u){return v(u.target.error)},g.onload=function(u){return o(u.target.result)},p==="binary"?g.readAsArrayBuffer(f):g.readAsText(f)})}function Lt(f,p){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var o=new FileReaderSync,v=p==="binary"?o.readAsArrayBuffer(f):o.readAsText(f);return v}var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(f,p){return p={exports:{}},f(p,p.exports),p.exports}var gt=Pt(function(f,p){(function(o,v){f.exports=v()})(Ot,(function(){function o(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(h){return typeof h}:o=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},o(d)}function v(d,h,b,m,A,q,Z){try{var ee=d[q](Z),B=ee.value}catch(Te){b(Te);return}ee.done?h(B):Promise.resolve(B).then(m,A)}function g(d){return function(){var h=this,b=arguments;return new Promise(function(m,A){var q=d.apply(h,b);function Z(B){v(q,m,A,Z,ee,"next",B)}function ee(B){v(q,m,A,Z,ee,"throw",B)}Z(void 0)})}}function u(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function s(d,h){for(var b=0;b<h.length;b++){var m=h[b];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function j(d,h,b){return h&&s(d.prototype,h),d}function k(d,h,b){return h in d?Object.defineProperty(d,h,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[h]=b,d}function a(d,h){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);h&&(m=m.filter(function(A){return Object.getOwnPropertyDescriptor(d,A).enumerable})),b.push.apply(b,m)}return b}function w(d){for(var h=1;h<arguments.length;h++){var b=arguments[h]!=null?arguments[h]:{};h%2?a(Object(b),!0).forEach(function(m){k(d,m,b[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):a(Object(b)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(b,m))})}return d}function P(d,h){return G(d)||Q(d,h)||ve()}function L(d){return Y(d)||V(d)||Ae()}function Y(d){if(Array.isArray(d)){for(var h=0,b=new Array(d.length);h<d.length;h++)b[h]=d[h];return b}}function G(d){if(Array.isArray(d))return d}function V(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}function Q(d,h){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]"){var b=[],m=!0,A=!1,q=void 0;try{for(var Z=d[Symbol.iterator](),ee;!(m=(ee=Z.next()).done)&&(b.push(ee.value),!(h&&b.length===h));m=!0);}catch(B){A=!0,q=B}finally{try{!m&&Z.return!=null&&Z.return()}finally{if(A)throw q}}return b}}function Ae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ve(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var N=function d(h){u(this,d),this.p=new Promise(h)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(d,h){var b=this;return new N(function(m,A){b.p.then(function(q){m(d?d(q):q)}).catch(function(q){return h?h(q):Promise.reject(q)}).then(m,A)})},N.prototype.catch=function(d){return this.then(null,d)},N.resolve=function(d){return new N(function(h){h(d)})},N.reject=function(d){return new N(function(h,b){b(d)})},["all","race"].forEach(function(d){N[d]=function(h){return new N(function(b,m){Promise[d](h.map(function(A){return A&&A.constructor&&A.constructor.__typeson__type__==="TypesonPromise"?A.p:A})).then(b,m)})}});var je={},K=je.toString,oe={}.hasOwnProperty,ae=Object.getPrototypeOf,xe=oe.toString;function l(d,h){return H(d)&&typeof d.then=="function"&&(!h||typeof d.catch=="function")}function n(d){return K.call(d).slice(8,-1)}function S(d,h){if(!d||o(d)!=="object")return!1;var b=ae(d);if(!b)return h===null;var m=oe.call(b,"constructor")&&b.constructor;return typeof m!="function"?h===null:h===m||h!==null&&xe.call(m)===xe.call(h)||typeof h=="function"&&typeof m.__typeson__type__=="string"&&m.__typeson__type__===h.__typeson__type__}function y(d){if(!d||n(d)!=="Object")return!1;var h=ae(d);return h?S(d,Object):!0}function ne(d){if(!d||n(d)!=="Object")return!1;var h=ae(d);return h?S(d,Object)||ne(h):!0}function H(d){return d&&o(d)==="object"}function se(d){return d.replace(/~/g,"~0").replace(/\./g,"~1")}function be(d){return d.replace(/~1/g,".").replace(/~0/g,"~")}function Ee(d,h){if(h==="")return d;var b=h.indexOf(".");if(b>-1){var m=d[be(h.slice(0,b))];return m===void 0?void 0:Ee(m,h.slice(b+1))}return d[be(h)]}function Ie(d,h,b){if(h==="")return b;var m=h.indexOf(".");if(m>-1){var A=d[be(h.slice(0,m))];return Ie(A,h.slice(m+1),b)}return d[be(h)]=b,d}function Ne(d){return d===null?"null":Array.isArray(d)?"array":o(d)}var pe=Object.keys,ge=Array.isArray,Be={}.hasOwnProperty,Ge=["type","replaced","iterateIn","iterateUnsetNumeric"];function $(d,h){if(d.keypath==="")return-1;var b=d.keypath.match(/\./g)||0,m=h.keypath.match(/\./g)||0;return b&&(b=b.length),m&&(m=m.length),b>m?-1:b<m?1:d.keypath<h.keypath?-1:d.keypath>h.keypath}var he=(function(){function d(h){u(this,d),this.options=h,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return j(d,[{key:"stringify",value:function(b,m,A,q){q=w({},this.options,{},q,{stringification:!0});var Z=this.encapsulate(b,null,q);return ge(Z)?JSON.stringify(Z[0],m,A):Z.then(function(ee){return JSON.stringify(ee,m,A)})}},{key:"stringifySync",value:function(b,m,A,q){return this.stringify(b,m,A,w({throwOnBadSyncType:!0},q,{sync:!0}))}},{key:"stringifyAsync",value:function(b,m,A,q){return this.stringify(b,m,A,w({throwOnBadSyncType:!0},q,{sync:!1}))}},{key:"parse",value:function(b,m,A){return A=w({},this.options,{},A,{parse:!0}),this.revive(JSON.parse(b,m),A)}},{key:"parseSync",value:function(b,m,A){return this.parse(b,m,w({throwOnBadSyncType:!0},A,{sync:!0}))}},{key:"parseAsync",value:function(b,m,A){return this.parse(b,m,w({throwOnBadSyncType:!0},A,{sync:!1}))}},{key:"specialTypeNames",value:function(b,m){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return A.returnTypeNames=!0,this.encapsulate(b,m,A)}},{key:"rootTypeName",value:function(b,m){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return A.iterateNone=!0,this.encapsulate(b,m,A)}},{key:"encapsulate",value:function(b,m,A){A=w({sync:!0},this.options,{},A);var q=A,Z=q.sync,ee=this,B={},Te=[],Re=[],Fe=[],He="cyclic"in A?A.cyclic:!0,Ye=A,Ze=Ye.encapsulateObserver,De=le("",b,He,m||{},Fe);function qe(C){var t=Object.values(B);if(A.iterateNone)return t.length?t[0]:d.getJSONType(C);if(t.length){if(A.returnTypeNames)return L(new Set(t));!C||!y(C)||Be.call(C,"$types")?C={$:C,$types:{$:B}}:C.$types=B}else H(C)&&Be.call(C,"$types")&&(C={$:C,$types:!0});return A.returnTypeNames?!1:C}function we(C,t){return ue.apply(this,arguments)}function ue(){return ue=g(regeneratorRuntime.mark(function C(t,e){var r;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.all(e.map(function(O){return O[1].p}));case 2:return r=c.sent,c.next=5,Promise.all(r.map((function(){var O=g(regeneratorRuntime.mark(function T(I){var _,F,z,W,ce,re,te,ye,de,J,_e,x,E,U;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(_=[],F=e.splice(0,1),z=P(F,1),W=z[0],ce=P(W,7),re=ce[0],te=ce[2],ye=ce[3],de=ce[4],J=ce[5],_e=ce[6],x=le(re,I,te,ye,_,!0,_e),E=S(x,N),!(re&&E)){D.next=11;break}return D.next=8,x.p;case 8:return U=D.sent,de[J]=U,D.abrupt("return",we(t,_));case 11:return re?de[J]=x:E?t=x.p:t=x,D.abrupt("return",we(t,_));case 13:case"end":return D.stop()}},T)}));return function(T){return O.apply(this,arguments)}})()));case 5:return c.abrupt("return",t);case 6:case"end":return c.stop()}},C)})),ue.apply(this,arguments)}function ie(C,t,e){Object.assign(C,t);var r=Ge.map(function(i){var c=C[i];return delete C[i],c});e(),Ge.forEach(function(i,c){C[i]=r[c]})}function le(C,t,e,r,i,c,O){var T,I={},_=o(t),F=Ze?function(E){var U=O||r.type||d.getJSONType(t);Ze(Object.assign(E||I,{keypath:C,value:t,cyclic:e,stateObj:r,promisesData:i,resolvingTypesonPromise:c,awaitingTypesonPromise:S(t,N)},{type:U}))}:null;if(["string","boolean","number","undefined"].includes(_))return t===void 0||_==="number"&&(isNaN(t)||t===-1/0||t===1/0)?(r.replaced?T=t:T=Se(C,t,r,i,!1,c,F),T!==t&&(I={replaced:T})):T=t,F&&F(),T;if(t===null)return F&&F(),t;if(e&&!r.iterateIn&&!r.iterateUnsetNumeric&&t&&o(t)==="object"){var z=Te.indexOf(t);if(z<0)e===!0&&(Te.push(t),Re.push(C));else return B[C]="#",F&&F({cyclicKeypath:Re[z]}),"#"+Re[z]}var W=y(t),ce=ge(t),re=(W||ce)&&(!ee.plainObjectReplacers.length||r.replaced)||r.iterateIn?t:Se(C,t,r,i,W||ce,null,F),te;if(re!==t?(T=re,I={replaced:re}):C===""&&S(t,N)?(i.push([C,t,e,r,void 0,void 0,r.type]),T=t):ce&&r.iterateIn!=="object"||r.iterateIn==="array"?(te=new Array(t.length),I={clone:te}):!["function","symbol"].includes(o(t))&&!("toJSON"in t)&&!S(t,N)&&!S(t,Promise)&&!S(t,ArrayBuffer)||W||r.iterateIn==="object"?(te={},r.addLength&&(te.length=t.length),I={clone:te}):T=t,F&&F(),A.iterateNone)return te||T;if(!te)return T;if(r.iterateIn){var ye=function(U){var R={ownKeys:Be.call(t,U)};ie(r,R,function(){var D=C+(C?".":"")+se(U),X=le(D,t[U],!!e,r,i,c);S(X,N)?i.push([D,X,!!e,r,te,U,r.type]):X!==void 0&&(te[U]=X)})};for(var de in t)ye(de);F&&F({endIterateIn:!0,end:!0})}else pe(t).forEach(function(E){var U=C+(C?".":"")+se(E),R={ownKeys:!0};ie(r,R,function(){var D=le(U,t[E],!!e,r,i,c);S(D,N)?i.push([U,D,!!e,r,te,E,r.type]):D!==void 0&&(te[E]=D)})}),F&&F({endIterateOwn:!0,end:!0});if(r.iterateUnsetNumeric){for(var J=t.length,_e=function(U){if(!(U in t)){var R=C+(C?".":"")+U,D={ownKeys:!1};ie(r,D,function(){var X=le(R,void 0,!!e,r,i,c);S(X,N)?i.push([R,X,!!e,r,te,U,r.type]):X!==void 0&&(te[U]=X)})}},x=0;x<J;x++)_e(x);F&&F({endIterateUnsetNumeric:!0,end:!0})}return te}function Se(C,t,e,r,i,c,O){for(var T=i?ee.plainObjectReplacers:ee.nonplainObjectReplacers,I=T.length;I--;){var _=T[I];if(_.test(t,e)){var F=_.type;if(ee.revivers[F]){var z=B[C];B[C]=z?[F].concat(z):F}if(Object.assign(e,{type:F,replaced:!0}),(Z||!_.replaceAsync)&&!_.replace)return O&&O({typeDetected:!0}),le(C,t,He&&"readonly",e,r,c,F);O&&O({replacing:!0});var W=Z||!_.replaceAsync?"replace":"replaceAsync";return le(C,_[W](t,e),He&&"readonly",e,r,c,F)}}return t}return Fe.length?Z&&A.throwOnBadSyncType?(function(){throw new TypeError("Sync method requested but async result obtained")})():Promise.resolve(we(De,Fe)).then(qe):!Z&&A.throwOnBadSyncType?(function(){throw new TypeError("Async method requested but sync result obtained")})():A.stringification&&Z?[qe(De)]:Z?qe(De):Promise.resolve(qe(De))}},{key:"encapsulateSync",value:function(b,m,A){return this.encapsulate(b,m,w({throwOnBadSyncType:!0},A,{sync:!0}))}},{key:"encapsulateAsync",value:function(b,m,A){return this.encapsulate(b,m,w({throwOnBadSyncType:!0},A,{sync:!1}))}},{key:"revive",value:function(b,m){var A=b&&b.$types;if(!A)return b;if(A===!0)return b.$;m=w({sync:!0},this.options,{},m);var q=m,Z=q.sync,ee=[],B={},Te=!0;A.$&&y(A.$)&&(b=b.$,A=A.$,Te=!1);var Re=this;function Fe(ue,ie){var le=Re.revivers[ue]||[],Se=P(le,1),C=Se[0];if(!C)throw new Error("Unregistered type: "+ue);return Z&&!("revive"in C)?ie:C[Z&&C.revive?"revive":!Z&&C.reviveAsync?"reviveAsync":"revive"](ie,B)}function He(){var ue=[];if(Object.entries(A).forEach(function(ie){var le=P(ie,2),Se=le[0],C=le[1];C!=="#"&&[].concat(C).forEach(function(t){var e=Re.revivers[t]||[null,{}],r=P(e,2),i=r[1].plain;i&&(ue.push({keypath:Se,type:t}),delete A[Se])})}),!!ue.length)return ue.sort($).reduce(function ie(le,Se){var C=Se.keypath,t=Se.type;if(l(le))return le.then(function(i){return ie(i,{keypath:C,type:t})});var e=Ee(b,C);if(e=Fe(t,e),S(e,N))return e.then(function(i){var c=Ie(b,C,i);c===i&&(b=c)});var r=Ie(b,C,e);r===e&&(b=r)},void 0)}var Ye=[];function Ze(ue,ie,le,Se,C){if(!(Te&&ue==="$types")){var t=A[ue],e=ge(ie);if(e||y(ie)){var r=e?new Array(ie.length):{};for(pe(ie).forEach(function(z){var W=Ze(ue+(ue?".":"")+se(z),ie[z],le||r,r,z),ce=function(te){return S(te,ke)?r[z]=void 0:te!==void 0&&(r[z]=te),te};S(W,N)?Ye.push(W.then(function(re){return ce(re)})):ce(W)}),ie=r;ee.length;){var i=P(ee[0],4),c=i[0],O=i[1],T=i[2],I=i[3],_=Ee(c,O);if(_!==void 0)T[I]=_;else break;ee.splice(0,1)}}if(!t)return ie;if(t==="#"){var F=Ee(le,ie.slice(1));return F===void 0&&ee.push([le,ie.slice(1),Se,C]),F}return[].concat(t).reduce(function z(W,ce){return S(W,N)?W.then(function(re){return z(re,ce)}):Fe(ce,W)},ie)}}function De(ue){return S(ue,ke)?void 0:ue}var qe=He(),we;return S(qe,N)?we=qe.then(function(){return b}):(we=Ze("",b,null),Ye.length&&(we=N.resolve(we).then(function(ue){return N.all([ue].concat(Ye))}).then(function(ue){var ie=P(ue,1),le=ie[0];return le}))),l(we)?Z&&m.throwOnBadSyncType?(function(){throw new TypeError("Sync method requested but async result obtained")})():S(we,N)?we.p.then(De):we:!Z&&m.throwOnBadSyncType?(function(){throw new TypeError("Async method requested but sync result obtained")})():Z?De(we):Promise.resolve(De(we))}},{key:"reviveSync",value:function(b,m){return this.revive(b,w({throwOnBadSyncType:!0},m,{sync:!0}))}},{key:"reviveAsync",value:function(b,m){return this.revive(b,w({throwOnBadSyncType:!0},m,{sync:!1}))}},{key:"register",value:function(b,m){return m=m||{},[].concat(b).forEach(function A(q){var Z=this;if(ge(q))return q.map(function(ee){return A.call(Z,ee)});q&&pe(q).forEach(function(ee){if(ee==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(d.JSON_TYPES.includes(ee))throw new TypeError("Plain JSON object types are reserved as type names");var B=q[ee],Te=B&&B.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Re=Te.filter(function(le){return le.type===ee});if(Re.length&&(Te.splice(Te.indexOf(Re[0]),1),delete this.revivers[ee],delete this.types[ee]),typeof B=="function"){var Fe=B;B={test:function(Se){return Se&&Se.constructor===Fe},replace:function(Se){return w({},Se)},revive:function(Se){return Object.assign(Object.create(Fe.prototype),Se)}}}else if(ge(B)){var He=B,Ye=P(He,3),Ze=Ye[0],De=Ye[1],qe=Ye[2];B={test:Ze,replace:De,revive:qe}}if(!(!B||!B.test)){var we={type:ee,test:B.test.bind(B)};B.replace&&(we.replace=B.replace.bind(B)),B.replaceAsync&&(we.replaceAsync=B.replaceAsync.bind(B));var ue=typeof m.fallback=="number"?m.fallback:m.fallback?0:1/0;if(B.testPlainObjects?this.plainObjectReplacers.splice(ue,0,we):this.nonplainObjectReplacers.splice(ue,0,we),B.revive||B.reviveAsync){var ie={};B.revive&&(ie.revive=B.revive.bind(B)),B.reviveAsync&&(ie.reviveAsync=B.reviveAsync.bind(B)),this.revivers[ee]=[ie,{plain:B.testPlainObjects}]}this.types[ee]=B}},this)},this),this}}]),d})(),ke=function d(){u(this,d)};return ke.__typeson__type__="TypesonUndefined",he.Undefined=ke,he.Promise=N,he.isThenable=l,he.toStringTag=n,he.hasConstructorOf=S,he.isObject=H,he.isPlainObject=y,he.isUserObject=ne,he.escapeKeyPathComponent=se,he.unescapeKeyPathComponent=be,he.getByKeyPath=Ee,he.getJSONType=Ne,he.JSON_TYPES=["null","boolean","number","string","array","object"],he}))}),rr=Pt(function(f,p){(function(o,v){f.exports=v()})(Ot,(function(){function o(t){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable}))),r.push.apply(r,i)}return r}function j(t){return(function(r){if(Array.isArray(r))return k(r)})(t)||(function(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)})(t)||(function(r,i){if(r){if(typeof r=="string")return k(r,i);var c=Object.prototype.toString.call(r).slice(8,-1);if(c==="Object"&&r.constructor&&(c=r.constructor.name),c==="Map"||c==="Set")return Array.from(r);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return k(r,i)}})(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function k(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function a(t){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function L(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable}))),r.push.apply(r,i)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(i){L(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}function V(t,e){return(function(i){if(Array.isArray(i))return i})(t)||(function(i,c){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var O=[],T=!0,I=!1,_=void 0;try{for(var F,z=i[Symbol.iterator]();!(T=(F=z.next()).done)&&(O.push(F.value),!c||O.length!==c);T=!0);}catch(W){I=!0,_=W}finally{try{T||z.return==null||z.return()}finally{if(I)throw _}}return O}})(t,e)||Ae(t,e)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Q(t){return(function(r){if(Array.isArray(r))return ve(r)})(t)||(function(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)})(t)||Ae(t)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Ae(t,e){if(t){if(typeof t=="string")return ve(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(t,e):void 0}}function ve(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var N=function t(e){w(this,t),this.p=new Promise(e)};N.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(N.prototype[Symbol.toStringTag]="TypesonPromise"),N.prototype.then=function(t,e){var r=this;return new N((function(i,c){r.p.then((function(O){i(t?t(O):O)})).catch((function(O){return e?e(O):Promise.reject(O)})).then(i,c)}))},N.prototype.catch=function(t){return this.then(null,t)},N.resolve=function(t){return new N((function(e){e(t)}))},N.reject=function(t){return new N((function(e,r){r(t)}))},["all","race"].forEach((function(t){N[t]=function(e){return new N((function(r,i){Promise[t](e.map((function(c){return c&&c.constructor&&c.constructor.__typeson__type__==="TypesonPromise"?c.p:c}))).then(r,i)}))}}));var je={}.toString,K={}.hasOwnProperty,oe=Object.getPrototypeOf,ae=K.toString;function xe(t,e){return y(t)&&typeof t.then=="function"&&(!e||typeof t.catch=="function")}function l(t){return je.call(t).slice(8,-1)}function n(t,e){if(!t||a(t)!=="object")return!1;var r=oe(t);if(!r)return e===null;var i=K.call(r,"constructor")&&r.constructor;return typeof i!="function"?e===null:e===i||e!==null&&ae.call(i)===ae.call(e)||typeof e=="function"&&typeof i.__typeson__type__=="string"&&i.__typeson__type__===e.__typeson__type__}function S(t){return!(!t||l(t)!=="Object")&&(!oe(t)||n(t,Object))}function y(t){return t&&a(t)==="object"}function ne(t){return t.replace(/~/g,"~0").replace(/\./g,"~1")}function H(t){return t.replace(/~1/g,".").replace(/~0/g,"~")}function se(t,e){if(e==="")return t;var r=e.indexOf(".");if(r>-1){var i=t[H(e.slice(0,r))];return i===void 0?void 0:se(i,e.slice(r+1))}return t[H(e)]}function be(t,e,r){if(e==="")return r;var i=e.indexOf(".");return i>-1?be(t[H(e.slice(0,i))],e.slice(i+1),r):(t[H(e)]=r,t)}function Ee(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}var Ie=Object.keys,Ne=Array.isArray,pe={}.hasOwnProperty,ge=["type","replaced","iterateIn","iterateUnsetNumeric"];function Be(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(i){return Promise.reject(i)}}}function Ge(t,e){if(t.keypath==="")return-1;var r=t.keypath.match(/\./g)||0,i=e.keypath.match(/\./g)||0;return r&&(r=r.length),i&&(i=i.length),r>i?-1:r<i?1:t.keypath<e.keypath?-1:t.keypath>e.keypath}var $=(function(){function t(e){w(this,t),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return(function(r,i,c){return i&&P(r.prototype,i),r})(t,[{key:"stringify",value:function(r,i,c,O){O=G(G(G({},this.options),O),{},{stringification:!0});var T=this.encapsulate(r,null,O);return Ne(T)?JSON.stringify(T[0],i,c):T.then((function(I){return JSON.stringify(I,i,c)}))}},{key:"stringifySync",value:function(r,i,c,O){return this.stringify(r,i,c,G(G({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"stringifyAsync",value:function(r,i,c,O){return this.stringify(r,i,c,G(G({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"parse",value:function(r,i,c){return c=G(G(G({},this.options),c),{},{parse:!0}),this.revive(JSON.parse(r,i),c)}},{key:"parseSync",value:function(r,i,c){return this.parse(r,i,G(G({throwOnBadSyncType:!0},c),{},{sync:!0}))}},{key:"parseAsync",value:function(r,i,c){return this.parse(r,i,G(G({throwOnBadSyncType:!0},c),{},{sync:!1}))}},{key:"specialTypeNames",value:function(r,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.returnTypeNames=!0,this.encapsulate(r,i,c)}},{key:"rootTypeName",value:function(r,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.iterateNone=!0,this.encapsulate(r,i,c)}},{key:"encapsulate",value:function(r,i,c){var O=Be((function(x,E){return Ee(Promise.all(E.map((function(U){return U[1].p}))),(function(U){return Ee(Promise.all(U.map(Be((function(R){var D=!1,X=[],Ke=V(E.splice(0,1),1),Oe=V(Ke[0],7),Le=Oe[0],$e=Oe[2],fe=Oe[3],Ve=Oe[4],me=Oe[5],Me=Oe[6],Pe=J(Le,R,$e,fe,X,!0,Me),ze=n(Pe,N);return(function(wt,lt){var at=wt();return at&&at.then?at.then(lt):lt(at)})((function(){if(Le&&ze)return Ee(Pe.p,(function(We){return Ve[me]=We,D=!0,O(x,X)}))}),(function(We){return D?We:(Le?Ve[me]=Pe:x=ze?Pe.p:Pe,O(x,X))}))})))),(function(){return x}))}))})),T=(c=G(G({sync:!0},this.options),c)).sync,I=this,_={},F=[],z=[],W=[],ce=!("cyclic"in c)||c.cyclic,re=c.encapsulateObserver,te=J("",r,ce,i||{},W);function ye(x){var E=Object.values(_);if(c.iterateNone)return E.length?E[0]:t.getJSONType(x);if(E.length){if(c.returnTypeNames)return Q(new Set(E));x&&S(x)&&!pe.call(x,"$types")?x.$types=_:x={$:x,$types:{$:_}}}else y(x)&&pe.call(x,"$types")&&(x={$:x,$types:!0});return!c.returnTypeNames&&x}function de(x,E,U){Object.assign(x,E);var R=ge.map((function(D){var X=x[D];return delete x[D],X}));U(),ge.forEach((function(D,X){x[D]=R[X]}))}function J(x,E,U,R,D,X,Ke){var Oe,Le={},$e=a(E),fe=re?function(tt){var Ce=Ke||R.type||t.getJSONType(E);re(Object.assign(tt||Le,{keypath:x,value:E,cyclic:U,stateObj:R,promisesData:D,resolvingTypesonPromise:X,awaitingTypesonPromise:n(E,N)},{type:Ce}))}:null;if(["string","boolean","number","undefined"].includes($e))return E===void 0||Number.isNaN(E)||E===Number.NEGATIVE_INFINITY||E===Number.POSITIVE_INFINITY?(Oe=R.replaced?E:_e(x,E,R,D,!1,X,fe))!==E&&(Le={replaced:Oe}):Oe=E,fe&&fe(),Oe;if(E===null)return fe&&fe(),E;if(U&&!R.iterateIn&&!R.iterateUnsetNumeric&&E&&a(E)==="object"){var Ve=F.indexOf(E);if(!(Ve<0))return _[x]="#",fe&&fe({cyclicKeypath:z[Ve]}),"#"+z[Ve];U===!0&&(F.push(E),z.push(x))}var me,Me=S(E),Pe=Ne(E),ze=(Me||Pe)&&(!I.plainObjectReplacers.length||R.replaced)||R.iterateIn?E:_e(x,E,R,D,Me||Pe,null,fe);if(ze!==E?(Oe=ze,Le={replaced:ze}):x===""&&n(E,N)?(D.push([x,E,U,R,void 0,void 0,R.type]),Oe=E):Pe&&R.iterateIn!=="object"||R.iterateIn==="array"?(me=new Array(E.length),Le={clone:me}):(["function","symbol"].includes(a(E))||"toJSON"in E||n(E,N)||n(E,Promise)||n(E,ArrayBuffer))&&!Me&&R.iterateIn!=="object"?Oe=E:(me={},R.addLength&&(me.length=E.length),Le={clone:me}),fe&&fe(),c.iterateNone)return me||Oe;if(!me)return Oe;if(R.iterateIn){var We=function(Ce){var et={ownKeys:pe.call(E,Ce)};de(R,et,(function(){var it=x+(x?".":"")+ne(Ce),ft=J(it,E[Ce],!!U,R,D,X);n(ft,N)?D.push([it,ft,!!U,R,me,Ce,R.type]):ft!==void 0&&(me[Ce]=ft)}))};for(var wt in E)We(wt);fe&&fe({endIterateIn:!0,end:!0})}else Ie(E).forEach((function(tt){var Ce=x+(x?".":"")+ne(tt);de(R,{ownKeys:!0},(function(){var et=J(Ce,E[tt],!!U,R,D,X);n(et,N)?D.push([Ce,et,!!U,R,me,tt,R.type]):et!==void 0&&(me[tt]=et)}))})),fe&&fe({endIterateOwn:!0,end:!0});if(R.iterateUnsetNumeric){for(var lt=E.length,at=function(Ce){if(!(Ce in E)){var et=x+(x?".":"")+Ce;de(R,{ownKeys:!1},(function(){var it=J(et,void 0,!!U,R,D,X);n(it,N)?D.push([et,it,!!U,R,me,Ce,R.type]):it!==void 0&&(me[Ce]=it)}))}},St=0;St<lt;St++)at(St);fe&&fe({endIterateUnsetNumeric:!0,end:!0})}return me}function _e(x,E,U,R,D,X,Ke){for(var Oe=D?I.plainObjectReplacers:I.nonplainObjectReplacers,Le=Oe.length;Le--;){var $e=Oe[Le];if($e.test(E,U)){var fe=$e.type;if(I.revivers[fe]){var Ve=_[x];_[x]=Ve?[fe].concat(Ve):fe}return Object.assign(U,{type:fe,replaced:!0}),!T&&$e.replaceAsync||$e.replace?(Ke&&Ke({replacing:!0}),J(x,$e[T||!$e.replaceAsync?"replace":"replaceAsync"](E,U),ce&&"readonly",U,R,X,fe)):(Ke&&Ke({typeDetected:!0}),J(x,E,ce&&"readonly",U,R,X,fe))}}return E}return W.length?T&&c.throwOnBadSyncType?(function(){throw new TypeError("Sync method requested but async result obtained")})():Promise.resolve(O(te,W)).then(ye):!T&&c.throwOnBadSyncType?(function(){throw new TypeError("Async method requested but sync result obtained")})():c.stringification&&T?[ye(te)]:T?ye(te):Promise.resolve(ye(te))}},{key:"encapsulateSync",value:function(r,i,c){return this.encapsulate(r,i,G(G({throwOnBadSyncType:!0},c),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(r,i,c){return this.encapsulate(r,i,G(G({throwOnBadSyncType:!0},c),{},{sync:!1}))}},{key:"revive",value:function(r,i){var c=r&&r.$types;if(!c)return r;if(c===!0)return r.$;var O=(i=G(G({sync:!0},this.options),i)).sync,T=[],I={},_=!0;c.$&&S(c.$)&&(r=r.$,c=c.$,_=!1);var F=this;function z(ye,de){var J=V(F.revivers[ye]||[],1)[0];if(!J)throw new Error("Unregistered type: "+ye);return O&&!("revive"in J)?de:J[O&&J.revive?"revive":!O&&J.reviveAsync?"reviveAsync":"revive"](de,I)}var W=[];function ce(ye){return n(ye,he)?void 0:ye}var re,te=(function(){var de=[];if(Object.entries(c).forEach((function(J){var _e=V(J,2),x=_e[0],E=_e[1];E!=="#"&&[].concat(E).forEach((function(U){V(F.revivers[U]||[null,{}],2)[1].plain&&(de.push({keypath:x,type:U}),delete c[x])}))})),de.length)return de.sort(Ge).reduce((function J(_e,x){var E=x.keypath,U=x.type;if(xe(_e))return _e.then((function(X){return J(X,{keypath:E,type:U})}));var R=se(r,E);if(n(R=z(U,R),N))return R.then((function(X){var Ke=be(r,E,X);Ke===X&&(r=Ke)}));var D=be(r,E,R);D===R&&(r=D)}),void 0)})();return n(te,N)?re=te.then((function(){return r})):(re=(function ye(de,J,_e,x,E){if(!_||de!=="$types"){var U=c[de],R=Ne(J);if(R||S(J)){var D=R?new Array(J.length):{};for(Ie(J).forEach((function(me){var Me=ye(de+(de?".":"")+ne(me),J[me],_e||D,D,me),Pe=function(We){return n(We,he)?D[me]=void 0:We!==void 0&&(D[me]=We),We};n(Me,N)?W.push(Me.then((function(ze){return Pe(ze)}))):Pe(Me)})),J=D;T.length;){var X=V(T[0],4),Ke=X[0],Oe=X[1],Le=X[2],$e=X[3],fe=se(Ke,Oe);if(fe===void 0)break;Le[$e]=fe,T.splice(0,1)}}if(!U)return J;if(U==="#"){var Ve=se(_e,J.slice(1));return Ve===void 0&&T.push([_e,J.slice(1),x,E]),Ve}return[].concat(U).reduce((function me(Me,Pe){return n(Me,N)?Me.then((function(ze){return me(ze,Pe)})):z(Pe,Me)}),J)}})("",r,null),W.length&&(re=N.resolve(re).then((function(ye){return N.all([ye].concat(W))})).then((function(ye){return V(ye,1)[0]})))),xe(re)?O&&i.throwOnBadSyncType?(function(){throw new TypeError("Sync method requested but async result obtained")})():n(re,N)?re.p.then(ce):re:!O&&i.throwOnBadSyncType?(function(){throw new TypeError("Async method requested but sync result obtained")})():O?ce(re):Promise.resolve(ce(re))}},{key:"reviveSync",value:function(r,i){return this.revive(r,G(G({throwOnBadSyncType:!0},i),{},{sync:!0}))}},{key:"reviveAsync",value:function(r,i){return this.revive(r,G(G({throwOnBadSyncType:!0},i),{},{sync:!1}))}},{key:"register",value:function(r,i){return i=i||{},[].concat(r).forEach((function c(O){var T=this;if(Ne(O))return O.map((function(I){return c.call(T,I)}));O&&Ie(O).forEach((function(I){if(I==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(t.JSON_TYPES.includes(I))throw new TypeError("Plain JSON object types are reserved as type names");var _=O[I],F=_&&_.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,z=F.filter((function(de){return de.type===I}));if(z.length&&(F.splice(F.indexOf(z[0]),1),delete this.revivers[I],delete this.types[I]),typeof _=="function"){var W=_;_={test:function(J){return J&&J.constructor===W},replace:function(J){return G({},J)},revive:function(J){return Object.assign(Object.create(W.prototype),J)}}}else if(Ne(_)){var ce=V(_,3);_={test:ce[0],replace:ce[1],revive:ce[2]}}if(_&&_.test){var re={type:I,test:_.test.bind(_)};_.replace&&(re.replace=_.replace.bind(_)),_.replaceAsync&&(re.replaceAsync=_.replaceAsync.bind(_));var te=typeof i.fallback=="number"?i.fallback:i.fallback?0:Number.POSITIVE_INFINITY;if(_.testPlainObjects?this.plainObjectReplacers.splice(te,0,re):this.nonplainObjectReplacers.splice(te,0,re),_.revive||_.reviveAsync){var ye={};_.revive&&(ye.revive=_.revive.bind(_)),_.reviveAsync&&(ye.reviveAsync=_.reviveAsync.bind(_)),this.revivers[I]=[ye,{plain:_.testPlainObjects}]}this.types[I]=_}}),this)}),this),this}}]),t})(),he=function t(){w(this,t)};he.__typeson__type__="TypesonUndefined",$.Undefined=he,$.Promise=N,$.isThenable=xe,$.toStringTag=l,$.hasConstructorOf=n,$.isObject=y,$.isPlainObject=S,$.isUserObject=function t(e){if(!e||l(e)!=="Object")return!1;var r=oe(e);return!r||n(e,Object)||t(r)},$.escapeKeyPathComponent=ne,$.unescapeKeyPathComponent=H,$.getByKeyPath=se,$.getJSONType=function(e){return e===null?"null":Array.isArray(e)?"array":a(e)},$.JSON_TYPES=["null","boolean","number","string","array","object"];for(var ke={userObject:{test:function(e,r){return $.isUserObject(e)},replace:function(e){return(function(i){for(var c=1;c<arguments.length;c++){var O=arguments[c]!=null?arguments[c]:{};c%2?s(Object(O),!0).forEach((function(T){u(i,T,O[T])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(O)):s(Object(O)).forEach((function(T){Object.defineProperty(i,T,Object.getOwnPropertyDescriptor(O,T))}))}return i})({},e)},revive:function(e){return e}}},d=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,r){return!!Array.isArray(e)&&(Object.keys(e).some((function(i){return String(Number.parseInt(i))!==i}))&&(r.iterateIn="object",r.addLength=!0),!0)},replace:function(e,r){return r.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var r=[];return Object.keys(e).forEach((function(i){var c=e[i];r[i]=c})),r}}},{sparseUndefined:{test:function(e,r){return e===void 0&&r.ownKeys===!1},replace:function(e){return 0},revive:function(e){}}}],h={undef:{test:function(e,r){return e===void 0&&(r.ownKeys||!("ownKeys"in r))},replace:function(e){return 0},revive:function(e){return new $.Undefined}}},b={StringObject:{test:function(e){return $.toStringTag(e)==="String"&&o(e)==="object"},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(e){return $.toStringTag(e)==="Boolean"&&o(e)==="object"},replace:function(e){return!!e},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(e){return $.toStringTag(e)==="Number"&&o(e)==="object"},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},m=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],A={date:{test:function(e){return $.toStringTag(e)==="Date"},replace:function(e){var r=e.getTime();return Number.isNaN(r)?"NaN":r},revive:function(e){return e==="NaN"?new Date(Number.NaN):new Date(e)}}},q={regexp:{test:function(e){return $.toStringTag(e)==="RegExp"},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var r=e.source,i=e.flags;return new RegExp(r,i)}}},Z={map:{test:function(e){return $.toStringTag(e)==="Map"},replace:function(e){return j(e.entries())},revive:function(e){return new Map(e)}}},ee={set:{test:function(e){return $.toStringTag(e)==="Set"},replace:function(e){return j(e.values())},revive:function(e){return new Set(e)}}},B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te=new Uint8Array(256),Re=0;Re<B.length;Re++)Te[B.charCodeAt(Re)]=Re;var Fe=function(e,r,i){i==null&&(i=e.byteLength);for(var c=new Uint8Array(e,0,i),O=c.length,T="",I=0;I<O;I+=3)T+=B[c[I]>>2],T+=B[(3&c[I])<<4|c[I+1]>>4],T+=B[(15&c[I+1])<<2|c[I+2]>>6],T+=B[63&c[I+2]];return O%3==2?T=T.slice(0,-1)+"=":O%3==1&&(T=T.slice(0,-2)+"=="),T},He=function(e){var r,i,c,O,T=e.length,I=.75*e.length,_=0;e[e.length-1]==="="&&(I--,e[e.length-2]==="="&&I--);for(var F=new ArrayBuffer(I),z=new Uint8Array(F),W=0;W<T;W+=4)r=Te[e.charCodeAt(W)],i=Te[e.charCodeAt(W+1)],c=Te[e.charCodeAt(W+2)],O=Te[e.charCodeAt(W+3)],z[_++]=r<<2|i>>4,z[_++]=(15&i)<<4|c>>2,z[_++]=(3&c)<<6|63&O;return F},Ye={arraybuffer:{test:function(e){return $.toStringTag(e)==="ArrayBuffer"},replace:function(e,r){r.buffers||(r.buffers=[]);var i=r.buffers.indexOf(e);return i>-1?{index:i}:(r.buffers.push(e),Fe(e))},revive:function(e,r){if(r.buffers||(r.buffers=[]),o(e)==="object")return r.buffers[e.index];var i=He(e);return r.buffers.push(i),i}}},Ze=typeof self>"u"?Ot:self,De={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((function(t){var e=t,r=Ze[e];r&&(De[t.toLowerCase()]={test:function(c){return $.toStringTag(c)===e},replace:function(c,O){var T=c.buffer,I=c.byteOffset,_=c.length;O.buffers||(O.buffers=[]);var F=O.buffers.indexOf(T);return F>-1?{index:F,byteOffset:I,length:_}:(O.buffers.push(T),{encoded:Fe(T),byteOffset:I,length:_})},revive:function(c,O){O.buffers||(O.buffers=[]);var T,I=c.byteOffset,_=c.length,F=c.encoded,z=c.index;return"index"in c?T=O.buffers[z]:(T=He(F),O.buffers.push(T)),new r(T,I,_)}})}));var qe={dataview:{test:function(e){return $.toStringTag(e)==="DataView"},replace:function(e,r){var i=e.buffer,c=e.byteOffset,O=e.byteLength;r.buffers||(r.buffers=[]);var T=r.buffers.indexOf(i);return T>-1?{index:T,byteOffset:c,byteLength:O}:(r.buffers.push(i),{encoded:Fe(i),byteOffset:c,byteLength:O})},revive:function(e,r){r.buffers||(r.buffers=[]);var i,c=e.byteOffset,O=e.byteLength,T=e.encoded,I=e.index;return"index"in e?i=r.buffers[I]:(i=He(T),r.buffers.push(i)),new DataView(i,c,O)}}},we={IntlCollator:{test:function(e){return $.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return $.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return $.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function ue(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e.buffer}var ie={file:{test:function(e){return $.toStringTag(e)==="File"},replace:function(e){var r=new XMLHttpRequest;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.open("GET",URL.createObjectURL(e),!1),r.send(),r.status!==200&&r.status!==0)throw new Error("Bad File access: "+r.status);return{type:e.type,stringContents:r.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var r=e.name,i=e.type,c=e.stringContents,O=e.lastModified;return new File([ue(c)],r,{type:i,lastModified:O})},replaceAsync:function(e){return new $.Promise((function(r,i){var c=new FileReader;c.addEventListener("load",(function(){r({type:e.type,stringContents:c.result,name:e.name,lastModified:e.lastModified})})),c.addEventListener("error",(function(){i(c.error)})),c.readAsBinaryString(e)}))}}},le={bigint:{test:function(e){return typeof e=="bigint"},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},Se={bigintObject:{test:function(e){return o(e)==="object"&&$.hasConstructorOf(e,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},C={cryptokey:{test:function(e){return $.toStringTag(e)==="CryptoKey"&&e.extractable},replaceAsync:function(e){return new $.Promise((function(r,i){crypto.subtle.exportKey("jwk",e).catch((function(c){i(c)})).then((function(c){r({jwk:c,algorithm:e.algorithm,usages:e.usages})}))}))},revive:function(e){var r=e.jwk,i=e.algorithm,c=e.usages;return crypto.subtle.importKey("jwk",r,i,!0,c)}}};return[ke,h,d,b,m,A,q,{imagedata:{test:function(e){return $.toStringTag(e)==="ImageData"},replace:function(e){return{array:j(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return $.toStringTag(e)==="ImageBitmap"||e&&e.dataset&&e.dataset.toStringTag==="ImageBitmap"},replace:function(e){var r=document.createElement("canvas");return r.getContext("2d").drawImage(e,0,0),r.toDataURL()},revive:function(e){var r=document.createElement("canvas"),i=r.getContext("2d"),c=document.createElement("img");return c.addEventListener("load",(function(){i.drawImage(c,0,0)})),c.src=e,r},reviveAsync:function(e){var r=document.createElement("canvas"),i=r.getContext("2d"),c=document.createElement("img");return c.addEventListener("load",(function(){i.drawImage(c,0,0)})),c.src=e,createImageBitmap(r)}}},ie,{file:ie.file,filelist:{test:function(e){return $.toStringTag(e)==="FileList"},replace:function(e){for(var r=[],i=0;i<e.length;i++)r[i]=e.item(i);return r},revive:function(e){return new((function(){function r(){v(this,r),this._files=arguments[0],this.length=this._files.length}return(function(c,O,T){return O&&g(c.prototype,O),c})(r,[{key:"item",value:function(c){return this._files[c]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),r})())(e)}}},{blob:{test:function(e){return $.toStringTag(e)==="Blob"},replace:function(e){var r=new XMLHttpRequest;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.open("GET",URL.createObjectURL(e),!1),r.send(),r.status!==200&&r.status!==0)throw new Error("Bad Blob access: "+r.status);return{type:e.type,stringContents:r.responseText}},revive:function(e){var r=e.type,i=e.stringContents;return new Blob([ue(i)],{type:r})},replaceAsync:function(e){return new $.Promise((function(r,i){var c=new FileReader;c.addEventListener("load",(function(){r({type:e.type,stringContents:c.result})})),c.addEventListener("error",(function(){i(c.error)})),c.readAsBinaryString(e)}))}}}].concat(typeof Map=="function"?Z:[],typeof Set=="function"?ee:[],typeof ArrayBuffer=="function"?Ye:[],typeof Uint8Array=="function"?De:[],typeof DataView=="function"?qe:[],typeof Intl<"u"?we:[],typeof crypto<"u"?C:[],typeof BigInt<"u"?[le,Se]:[])}))}),st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ct=new Uint8Array(256);for(var dt=0;dt<st.length;dt++)ct[st.codePointAt(dt)]=dt;var Et=function(p,o,v){v==null&&(v=p.byteLength);for(var g=new Uint8Array(p,0,v),u=g.length,s="",j=0;j<u;j+=3)s+=st[g[j]>>2],s+=st[(g[j]&3)<<4|g[j+1]>>4],s+=st[(g[j+1]&15)<<2|g[j+2]>>6],s+=st[g[j+2]&63];return u%3===2?s=s.slice(0,-1)+"=":u%3===1&&(s=s.slice(0,-2)+"=="),s},Ut=function(p){var o=p.length,v=p.length*.75,g=0,u,s,j,k;p[p.length-1]==="="&&(v--,p[p.length-2]==="="&&v--);for(var a=new ArrayBuffer(v),w=new Uint8Array(a),P=0;P<o;P+=4)u=ct[p.codePointAt(P)],s=ct[p.codePointAt(P+1)],j=ct[p.codePointAt(P+2)],k=ct[p.codePointAt(P+3)],w[g++]=u<<2|s>>4,w[g++]=(s&15)<<4|j>>2,w[g++]=(j&3)<<6|k&63;return a},nr=typeof self>"u"?global:self,Ft={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(f){var p=f,o=nr[p];o&&(Ft[f.toLowerCase()+"2"]={test:function(v){return gt.toStringTag(v)===p},replace:function(v){var g=v.buffer,u=v.byteOffset,s=v.length;return{buffer:g,byteOffset:u,length:s}},revive:function(v){var g=v.buffer,u=v.byteOffset,s=v.length;return new o(g,u,s)}})});var ir={arraybuffer:{test:function(f){return gt.toStringTag(f)==="ArrayBuffer"},replace:function(f){return Et(f,0,f.byteLength)},revive:function(f){var p=Ut(f);return p}}},Je=new gt().register(rr),or="FileReaderSync"in self,bt=[],vt=0;Je.register([ir,Ft,{blob2:{test:function(f){return gt.toStringTag(f)==="Blob"},replace:function(f){if(f.isClosed)throw new Error("The Blob is closed");if(or){var p=Lt(f,"binary"),o=Et(p,0,p.byteLength);return{type:f.type,data:o}}else{bt.push(f);var v={type:f.type,data:{start:vt,end:vt+f.size}};return vt+=f.size,v}},finalize:function(f,p){f.data=Et(p,0,p.byteLength)},revive:function(f){var p=f.type,o=f.data;return new Blob([Ut(o)],{type:p})}}}]);Je.mustFinalize=function(){return bt.length>0};Je.finalize=function(f){return nt(void 0,void 0,void 0,function(){var p,o,v,g,u,s,j,k,a,w,P,L;return Qe(this,function(Y){switch(Y.label){case 0:return[4,Rt(new Blob(bt),"binary")];case 1:if(p=Y.sent(),f){for(o=0,v=f;o<v.length;o++)if(g=v[o],g.$types){u=g.$types,s=u.$,s&&(u=u.$);for(j in u)k=u[j],a=Je.types[k],a&&a.finalize&&(w=Ue.getByKeyPath(g,s?"$."+j:j),a.finalize(w,p.slice((P=w.data)===null||P===void 0?void 0:P.start,(L=w.data)===null||L===void 0?void 0:L.end)))}}return bt=[],vt=0,[2]}})})};var ar=2e3;function sr(f,p){return nt(this,void 0,void 0,function(){function o(){return nt(this,void 0,void 0,function(){var P,L,Y,G,V,Q,Ae,ve,N,je;return Qe(this,function(K){switch(K.label){case 0:return[4,Promise.all(g.map(function(oe){return oe.count()}))];case 1:P=K.sent(),P.forEach(function(oe,ae){return s[ae].rowCount=oe}),w.totalRows=P.reduce(function(oe,ae){return oe+ae}),L=JSON.stringify(k,void 0,j?2:void 0),Y=L.lastIndexOf("]"),G=L.substring(0,Y),u.push(G),V=p.filter,Q=p.transform,Ae=function(oe){var ae,xe,l,n,S,y,ne,H,se,be,Ee,Ie;return Qe(this,function(Ne){switch(Ne.label){case 0:ae=f.table(oe),xe=ae.schema.primKey,l=!!xe.keyPath,n=p.numRowsPerChunk||ar,S=l?{tableName:ae.name,inbound:!0,rows:[]}:{tableName:ae.name,inbound:!1,rows:[]},y=JSON.stringify(S,void 0,j?2:void 0),j&&(y=y.split(`
`).join(`
    `)),ne=y.lastIndexOf("]"),u.push(y.substring(0,ne)),H=null,se=0,be=!0,Ee=function(){var pe,ge,Be,Ge,$,h,he,ke,d,h;return Qe(this,function(b){switch(b.label){case 0:return a&&Ue.ignoreTransaction(function(){return a(w)}),pe=H==null?ae.limit(n):ae.where(":id").above(H).limit(n),[4,pe.toArray()];case 1:return ge=b.sent(),ge.length===0?[2,"break"]:(H!=null&&se>0&&(u.push(","),j&&u.push(`
      `)),be=ge.length===n,l?(Be=V?ge.filter(function(m){return V(oe,m)}):ge,Ge=Q?Be.map(function(m){return Q(oe,m).value}):Be,$=Ge.map(function(m){return Je.encapsulate(m)}),Je.mustFinalize()?[4,Ue.waitFor(Je.finalize($))]:[3,3]):[3,4]);case 2:b.sent(),b.label=3;case 3:return h=JSON.stringify($,void 0,j?2:void 0),j&&(h=h.split(`
`).join(`
      `)),u.push(new Blob([h.substring(1,h.length-1)])),se=Ge.length,H=ge.length>0?Ue.getByKeyPath(ge[ge.length-1],xe.keyPath):null,[3,8];case 4:return[4,pe.primaryKeys()];case 5:return he=b.sent(),ke=he.map(function(m,A){return[m,ge[A]]}),V&&(ke=ke.filter(function(m){var A=m[0],q=m[1];return V(oe,q,A)})),Q&&(ke=ke.map(function(m){var A=m[0],q=m[1],Z=Q(oe,q,A);return[Z.key,Z.value]})),d=ke.map(function(m){return Je.encapsulate(m)}),Je.mustFinalize()?[4,Ue.waitFor(Je.finalize(d))]:[3,7];case 6:b.sent(),b.label=7;case 7:h=JSON.stringify(d,void 0,j?2:void 0),j&&(h=h.split(`
`).join(`
      `)),u.push(new Blob([h.substring(1,h.length-1)])),se=ke.length,H=he.length>0?he[he.length-1]:null,b.label=8;case 8:return w.completedRows+=ge.length,[2]}})},Ne.label=1;case 1:return be?[5,Ee()]:[3,3];case 2:return Ie=Ne.sent(),Ie==="break"?[3,3]:[3,1];case 3:return u.push(y.substr(ne)),w.completedTables+=1,w.completedTables<w.totalTables&&u.push(","),[2]}})},ve=0,N=s,K.label=2;case 2:return ve<N.length?(je=N[ve].name,[5,Ae(je)]):[3,5];case 3:K.sent(),K.label=4;case 4:return ve++,[3,2];case 5:return u.push(L.substr(Y)),w.done=!0,a&&Ue.ignoreTransaction(function(){return a(w)}),[2]}})})}var v,g,u,s,j,k,a,w;return Qe(this,function(P){switch(P.label){case 0:p=p||{},v=p.skipTables?p.skipTables:[],g=f.tables.filter(function(L){return!v.includes(L.name)}),u=[],s=g.map(function(L){return{name:L.name,schema:er(L),rowCount:0}}),j=p.prettyJson,k={formatName:"dexie",formatVersion:1,data:{databaseName:f.name,databaseVersion:f.verno,tables:s,data:[]}},a=p.progressCallback,w={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:s.length},P.label=1;case 1:return P.trys.push([1,,6,7]),p.noTransaction?[4,o()]:[3,3];case 2:return P.sent(),[3,5];case 3:return[4,f.transaction("r",f.tables,o)];case 4:P.sent(),P.label=5;case 5:return[3,7];case 6:return Je.finalize(),[7];case 7:return[2,new Blob(u,{type:"text/json"})]}})})}var cr=1,ur={Stream:function(){}},lr=Pt(function(f,p){(function(o){var v=typeof process=="object"&&Bt?Bt:self;o.parser=function(l){return new Y(l)},o.CParser=Y,o.CStream=V,o.createStream=G,o.MAX_BUFFER_LENGTH=10*1024*1024,o.DEBUG=v.CDEBUG==="debug",o.INFO=v.CDEBUG==="debug"||v.CDEBUG==="info",o.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var g={textNode:void 0,numberNode:""},u=o.EVENTS.filter(function(l){return l!=="error"&&l!=="end"}),s=0,j;o.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var k in o.STATE)o.STATE[o.STATE[k]]=k;s=o.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(l){function n(){this.__proto__=l}return n.prototype=l,new n}),Object.getPrototypeOf||(Object.getPrototypeOf=function(l){return l.__proto__}),Object.keys||(Object.keys=function(l){var n=[];for(var S in l)l.hasOwnProperty(S)&&n.push(S);return n});function w(l){var n=Math.max(o.MAX_BUFFER_LENGTH,10),S=0;for(var y in g){var ne=l[y]===void 0?0:l[y].length;if(ne>n)switch(y){case"text":closeText(l);break;default:K(l,"Max buffer length exceeded: "+y)}S=Math.max(S,ne)}l.bufferCheckPosition=o.MAX_BUFFER_LENGTH-S+l.position}function P(l){for(var n in g)l[n]=g[n]}var L=/[\\"\n]/g;function Y(l){if(!(this instanceof Y))return new Y(l);var n=this;P(n),n.bufferCheckPosition=o.MAX_BUFFER_LENGTH,n.q=n.c=n.p="",n.opt=l||{},n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.state=s.BEGIN,n.stack=new Array,n.position=n.column=0,n.line=1,n.slashed=!1,n.unicodeI=0,n.unicodeS=null,n.depth=0,Q(n,"onready")}Y.prototype={end:function(){oe(this)},write:xe,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{j=ur.Stream}catch{j=function(){}}function G(l){return new V(l)}function V(l){if(!(this instanceof V))return new V(l);this._parser=new Y(l),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var n=this;j.apply(n),this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(S){n.emit("error",S),n._parser.error=null},u.forEach(function(S){Object.defineProperty(n,"on"+S,{get:function(){return n._parser["on"+S]},set:function(y){if(!y)return n.removeAllListeners(S),n._parser["on"+S]=y,y;n.on(S,y)},enumerable:!0,configurable:!1})})}V.prototype=Object.create(j.prototype,{constructor:{value:V}}),V.prototype.write=function(l){l=new Buffer(l);for(var n=0;n<l.length;n++){var S=l[n];if(this.bytes_remaining>0){for(var y=0;y<this.bytes_remaining;y++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+y]=l[y];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,n=n+y-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&S>=128)if(S>=194&&S<=223&&(this.bytes_in_sequence=2),S>=224&&S<=239&&(this.bytes_in_sequence=3),S>=240&&S<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>l.length){for(var ne=0;ne<=l.length-1-n;ne++)this.temp_buffs[this.bytes_in_sequence][ne]=l[n+ne];return this.bytes_remaining=n+this.bytes_in_sequence-l.length,!0}else{this.string=l.slice(n,n+this.bytes_in_sequence).toString(),n=n+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var H=n;H<l.length&&!(l[H]>=128);H++);this.string=l.slice(n,H).toString(),this._parser.write(this.string),this.emit("data",this.string),n=H-1}},V.prototype.end=function(l){return l&&l.length&&this._parser.write(l.toString()),this._parser.end(),!0},V.prototype.on=function(l,n){var S=this;return!S._parser["on"+l]&&u.indexOf(l)!==-1&&(S._parser["on"+l]=function(){var y=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);y.splice(0,0,l),S.emit.apply(S,y)}),j.prototype.on.call(S,l,n)},V.prototype.destroy=function(){P(this._parser),this.emit("close")};function Q(l,n,S){o.INFO&&console.log("-- emit",n,S),l[n]&&l[n](S)}function Ae(l,n,S){ve(l),Q(l,n,S)}function ve(l,n){l.textNode=je(l.opt,l.textNode),l.textNode!==void 0&&Q(l,n||"onvalue",l.textNode),l.textNode=void 0}function N(l){l.numberNode&&Q(l,"onvalue",parseFloat(l.numberNode)),l.numberNode=""}function je(l,n){return n===void 0||(l.trim&&(n=n.trim()),l.normalize&&(n=n.replace(/\s+/g," "))),n}function K(l,n){return ve(l),n+=`
Line: `+l.line+`
Column: `+l.column+`
Char: `+l.c,n=new Error(n),l.error=n,Q(l,"onerror",n),l}function oe(l){return(l.state!==s.VALUE||l.depth!==0)&&K(l,"Unexpected end"),ve(l),l.c="",l.closed=!0,Q(l,"onend"),Y.call(l,l.opt),l}function ae(l){return l===a.carriageReturn||l===a.lineFeed||l===a.space||l===a.tab}function xe(l){var n=this;if(this.error)throw this.error;if(n.closed)return K(n,"Cannot write after close. Assign an onready handler.");if(l===null)return oe(n);var S=0,y=l.charCodeAt(0),ne=n.p;for(o.DEBUG&&console.log("write -> ["+l+"]");y&&(ne=y,n.c=y=l.charCodeAt(S++),ne!==y?n.p=ne:ne=n.p,!!y);)switch(o.DEBUG&&console.log(S,y,o.STATE[n.state]),n.position++,y===a.lineFeed?(n.line++,n.column=0):n.column++,n.state){case s.BEGIN:y===a.openBrace?n.state=s.OPEN_OBJECT:y===a.openBracket?n.state=s.OPEN_ARRAY:ae(y)||K(n,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(ae(y))continue;if(n.state===s.OPEN_KEY)n.stack.push(s.CLOSE_KEY);else if(y===a.closeBrace){Q(n,"onopenobject"),this.depth++,Q(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||s.VALUE;continue}else n.stack.push(s.CLOSE_OBJECT);y===a.doubleQuote?n.state=s.STRING:K(n,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(ae(y))continue;n.state,s.CLOSE_KEY,y===a.colon?(n.state===s.CLOSE_OBJECT?(n.stack.push(s.CLOSE_OBJECT),ve(n,"onopenobject"),this.depth++):ve(n,"onkey"),n.state=s.VALUE):y===a.closeBrace?(Ae(n,"oncloseobject"),this.depth--,n.state=n.stack.pop()||s.VALUE):y===a.comma?(n.state===s.CLOSE_OBJECT&&n.stack.push(s.CLOSE_OBJECT),ve(n),n.state=s.OPEN_KEY):K(n,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(ae(y))continue;if(n.state===s.OPEN_ARRAY)if(Q(n,"onopenarray"),this.depth++,n.state=s.VALUE,y===a.closeBracket){Q(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||s.VALUE;continue}else n.stack.push(s.CLOSE_ARRAY);y===a.doubleQuote?n.state=s.STRING:y===a.openBrace?n.state=s.OPEN_OBJECT:y===a.openBracket?n.state=s.OPEN_ARRAY:y===a.t?n.state=s.TRUE:y===a.f?n.state=s.FALSE:y===a.n?n.state=s.NULL:y===a.minus?n.numberNode+="-":a._0<=y&&y<=a._9?(n.numberNode+=String.fromCharCode(y),n.state=s.NUMBER_DIGIT):K(n,"Bad value");continue;case s.CLOSE_ARRAY:if(y===a.comma)n.stack.push(s.CLOSE_ARRAY),ve(n,"onvalue"),n.state=s.VALUE;else if(y===a.closeBracket)Ae(n,"onclosearray"),this.depth--,n.state=n.stack.pop()||s.VALUE;else{if(ae(y))continue;K(n,"Bad array")}continue;case s.STRING:n.textNode===void 0&&(n.textNode="");var H=S-1,se=n.slashed,be=n.unicodeI;e:for(;;){for(o.DEBUG&&console.log(S,y,o.STATE[n.state],se);be>0;)if(n.unicodeS+=String.fromCharCode(y),y=l.charCodeAt(S++),n.position++,be===4?(n.textNode+=String.fromCharCode(parseInt(n.unicodeS,16)),be=0,H=S-1):be++,!y)break e;if(y===a.doubleQuote&&!se){n.state=n.stack.pop()||s.VALUE,n.textNode+=l.substring(H,S-1),n.position+=S-1-H;break}if(y===a.backslash&&!se&&(se=!0,n.textNode+=l.substring(H,S-1),n.position+=S-1-H,y=l.charCodeAt(S++),n.position++,!y))break;if(se){if(se=!1,y===a.n?n.textNode+=`
`:y===a.r?n.textNode+="\r":y===a.t?n.textNode+="	":y===a.f?n.textNode+="\f":y===a.b?n.textNode+="\b":y===a.u?(be=1,n.unicodeS=""):n.textNode+=String.fromCharCode(y),y=l.charCodeAt(S++),n.position++,H=S-1,y)continue;break}L.lastIndex=S;var Ee=L.exec(l);if(Ee===null){S=l.length+1,n.textNode+=l.substring(H,S-1),n.position+=S-1-H;break}if(S=Ee.index+1,y=l.charCodeAt(Ee.index),!y){n.textNode+=l.substring(H,S-1),n.position+=S-1-H;break}}n.slashed=se,n.unicodeI=be;continue;case s.TRUE:y===a.r?n.state=s.TRUE2:K(n,"Invalid true started with t"+y);continue;case s.TRUE2:y===a.u?n.state=s.TRUE3:K(n,"Invalid true started with tr"+y);continue;case s.TRUE3:y===a.e?(Q(n,"onvalue",!0),n.state=n.stack.pop()||s.VALUE):K(n,"Invalid true started with tru"+y);continue;case s.FALSE:y===a.a?n.state=s.FALSE2:K(n,"Invalid false started with f"+y);continue;case s.FALSE2:y===a.l?n.state=s.FALSE3:K(n,"Invalid false started with fa"+y);continue;case s.FALSE3:y===a.s?n.state=s.FALSE4:K(n,"Invalid false started with fal"+y);continue;case s.FALSE4:y===a.e?(Q(n,"onvalue",!1),n.state=n.stack.pop()||s.VALUE):K(n,"Invalid false started with fals"+y);continue;case s.NULL:y===a.u?n.state=s.NULL2:K(n,"Invalid null started with n"+y);continue;case s.NULL2:y===a.l?n.state=s.NULL3:K(n,"Invalid null started with nu"+y);continue;case s.NULL3:y===a.l?(Q(n,"onvalue",null),n.state=n.stack.pop()||s.VALUE):K(n,"Invalid null started with nul"+y);continue;case s.NUMBER_DECIMAL_POINT:y===a.period?(n.numberNode+=".",n.state=s.NUMBER_DIGIT):K(n,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:a._0<=y&&y<=a._9?n.numberNode+=String.fromCharCode(y):y===a.period?(n.numberNode.indexOf(".")!==-1&&K(n,"Invalid number has two dots"),n.numberNode+="."):y===a.e||y===a.E?((n.numberNode.indexOf("e")!==-1||n.numberNode.indexOf("E")!==-1)&&K(n,"Invalid number has two exponential"),n.numberNode+="e"):y===a.plus||y===a.minus?(ne===a.e||ne===a.E||K(n,"Invalid symbol in number"),n.numberNode+=String.fromCharCode(y)):(N(n),S--,n.state=n.stack.pop()||s.VALUE);continue;default:K(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&w(n),n}})(p)});function fr(f){var p=0,o=pr(),v={pullAsync:function(g){return nt(this,void 0,void 0,function(){var u,s,j;return Qe(this,function(k){switch(k.label){case 0:return u=f.slice(p,p+g),p+=g,[4,Rt(u,"text")];case 1:return s=k.sent(),j=o.write(s),v.result=j||{},[2,j]}})})},pullSync:function(g){var u=f.slice(p,p+g);p+=g;var s=Lt(u,"text"),j=o.write(s);return v.result=j||{},j},done:function(){return o.done()},eof:function(){return p>=f.size},result:{}};return v}function pr(f){var p=lr.parser(),o=0,v,g=[],u,s,j=!1,k=!1;return p.onopenobject=function(a){var w={};w.incomplete=!0,v||(v=w),u&&(g.push([s,u,k]),k?u.push(w):u[s]=w),u=w,s=a,k=!1,++o},p.onkey=function(a){return s=a},p.onvalue=function(a){return k?u.push(a):u[s]=a},p.oncloseobject=function(){var a;delete u.incomplete,s=null,--o===0?j=!0:(a=g.pop(),s=a[0],u=a[1],k=a[2])},p.onopenarray=function(){var a=[];a.incomplete=!0,v||(v=a),u&&(g.push([s,u,k]),k?u.push(a):u[s]=a),u=a,k=!0,s=null,++o},p.onclosearray=function(){var a;delete u.incomplete,s=null,--o===0?j=!0:(a=g.pop(),s=a[0],u=a[1],k=a[2])},{write:function(a){return p.write(a),v},done:function(){return j}}}var Dt=1024;function Kt(f,p){return nt(this,void 0,void 0,function(){var o,v,g,u;return Qe(this,function(s){switch(s.label){case 0:return p=p||{},o=p.chunkSizeBytes||Dt*1024,[4,$t(f,o)];case 1:return v=s.sent(),g=v.result.data,u=new Ue(p.name!==void 0?p.name:g.databaseName),u.version(g.databaseVersion).stores(tr(g)),[4,Mt(u,v,p.name!==void 0?mt(mt({},p),{acceptNameDiff:!0}):p)];case 2:return s.sent(),[2,u]}})})}function Mt(f,p,o){return nt(this,void 0,void 0,function(){function v(){return nt(this,void 0,void 0,function(){var V,Q,Ae,ve,N;return Qe(this,function(je){switch(je.label){case 0:V=function(K){var oe,ae,xe,l,n,S,y,ne,H,se,be,Ee,Ie;return Qe(this,function(Ne){switch(Ne.label){case 0:if(a.includes(K.tableName))return[2,"continue"];if(!K.rows)return[2,"break"];if(!K.rows.incomplete&&K.rows.length===0)return[2,"continue"];if(w&&Ue.ignoreTransaction(function(){return w(P)}),oe=K.tableName,ae=f.table(oe),xe=k.tables.filter(function(pe){return pe.name===oe})[0].schema,!ae){if(o.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(K.tableName," is missing in installed database"))}if(!o.acceptChangedPrimaryKey&&xe.split(",")[0]!=ae.schema.primKey.src)throw new Error("Primary key differs for table ".concat(K.tableName,". "));for(l=K.rows,n=[],S=0;S<l.length&&(y=l[S],!y.incomplete);S++)n.push(Je.revive(y));return ne=o.filter,H=o.transform,se=ne?K.inbound?n.filter(function(pe){return ne(oe,pe)}):n.filter(function(pe){var ge=pe[0],Be=pe[1];return ne(oe,Be,ge)}):n,H&&(se=se.map(K.inbound?function(pe){return H(oe,pe).value}:function(pe){var ge=pe[0],Be=pe[1],Ge=H(oe,Be,ge);return[Ge.key,Ge.value]})),be=K.inbound?[void 0,se]:[se.map(function(pe){return pe[0]}),n.map(function(pe){return pe[1]})],Ee=be[0],Ie=be[1],o.overwriteValues?[4,ae.bulkPut(Ie,Ee)]:[3,2];case 1:return Ne.sent(),[3,4];case 2:return[4,ae.bulkAdd(Ie,Ee)];case 3:Ne.sent(),Ne.label=4;case 4:return P.completedRows+=n.length,n.incomplete||(P.completedTables+=1),l.splice(0,n.length),[2]}})},Q=0,Ae=k.data,je.label=1;case 1:return Q<Ae.length?(ve=Ae[Q],[5,V(ve)]):[3,4];case 2:if(N=je.sent(),N==="break")return[3,4];je.label=3;case 3:return Q++,[3,1];case 4:for(;k.data.length>0&&k.data[0].rows&&!k.data[0].rows.incomplete;)k.data.splice(0,1);return!u.done()&&!u.eof()?j?(u.pullSync(g),[3,7]):[3,5]:[3,8];case 5:return[4,Ue.waitFor(u.pullAsync(g))];case 6:je.sent(),je.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var g,u,s,j,k,a,w,P,L,Y,G;return Qe(this,function(V){switch(V.label){case 0:return o=o||{},g=o.chunkSizeBytes||Dt*1024,[4,$t(p,g)];case 1:if(u=V.sent(),s=u.result,j="FileReaderSync"in self,k=s.data,a=o.skipTables?o.skipTables:[],!o.acceptNameDiff&&f.name!==k.databaseName)throw new Error("Name differs. Current database name is ".concat(f.name," but export is ").concat(k.databaseName));if(!o.acceptVersionDiff&&f.verno!==k.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(f.verno," but export is ").concat(k.databaseVersion));if(w=o.progressCallback,P={done:!1,completedRows:0,completedTables:0,totalRows:k.tables.reduce(function(Q,Ae){return Q+Ae.rowCount},0),totalTables:k.tables.length},w&&Ue.ignoreTransaction(function(){return w(P)}),!o.clearTablesBeforeImport)return[3,5];L=0,Y=f.tables,V.label=2;case 2:return L<Y.length?(G=Y[L],a.includes(G.name)?[3,4]:[4,G.clear()]):[3,5];case 3:V.sent(),V.label=4;case 4:return L++,[3,2];case 5:return o.noTransaction?[4,v()]:[3,7];case 6:return V.sent(),[3,9];case 7:return[4,f.transaction("rw",f.tables,v)];case 8:V.sent(),V.label=9;case 9:return P.done=!0,w&&Ue.ignoreTransaction(function(){return w(P)}),[2]}})})}function $t(f,p){return nt(this,void 0,void 0,function(){var o,v;return Qe(this,function(g){switch(g.label){case 0:o="slice"in f?fr(f):f,g.label=1;case 1:return o.eof()?[3,3]:[4,o.pullAsync(p)];case 2:return g.sent(),o.result.data&&o.result.data.data?[3,3]:[3,1];case 3:if(v=o.result,!v||v.formatName!="dexie")throw new Error("Given file is not a dexie export");if(v.formatVersion>cr)throw new Error("Format version ".concat(v.formatVersion," not supported"));if(!v.data)throw new Error("No data in export file");if(!v.data.databaseName)throw new Error("Missing databaseName in export file");if(!v.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!v.data.tables)throw new Error("Missing tables in export file");return[2,o]}})})}Ue.prototype.export=function(f){return sr(this,f)};Ue.prototype.import=function(f,p){return Mt(this,f,p)};Ue.import=function(f,p){return Kt(f,p)};async function yr(){const f=Date.now();return ot.export({prettyJson:!0,transform:(p,o,v)=>(p===ot.intervals.name&&(o.end===Vt&&(o.end=f),o.start=new Date(o.start).toISOString(),o.end=new Date(o.end).toISOString()),{value:o,key:v})})}async function dr(f){await ot.delete(),(await Kt(f,{transform:(o,v,g)=>(o===ot.intervals.name&&(v.start=new Date(v.start).getTime(),v.end=new Date(v.end).getTime()),{value:v,key:g})})).close(),await ot.open()}async function vr(){await ot.delete(),await ot.open()}const Xe=_t((f,p)=>({step:"not-started",error:"",reset:()=>f({step:"not-started",error:""}),clearError:()=>f({error:""}),closeSnackbar:()=>f({step:"not-started"}),isSnackbarOpen:()=>p().step==="result",start:()=>f({step:"confirm"}),cancel:()=>f({step:"not-started"}),confirm:()=>f({step:"in-progress"}),finish:()=>f({step:"result"}),setError:o=>f({error:o})})),hr=()=>{const f=Xe(p=>p.start);return M.jsxs(M.Fragment,{children:[M.jsx(ut,{variant:"text",color:"error",startIcon:M.jsx(Zt,{}),onClick:f,children:"Delete data"}),M.jsx(mr,{}),M.jsx(br,{})]})},mr=()=>{const f=Xe(u=>u.step),p=Xe(u=>u.cancel),o=Xe(u=>u.confirm),v=Xe(u=>u.finish),g=Xe(u=>u.setError);return M.jsxs(zt,{open:f==="confirm",children:[M.jsx(Qt,{children:"Are you sure you want to delete all the data forever?"}),M.jsx(Wt,{children:"You cannot undo this action."}),M.jsxs(Xt,{children:[M.jsx(ut,{autoFocus:!0,onClick:p,children:"No"}),M.jsx(ut,{onClick:async()=>{o(),vr().catch(u=>{console.error(u),g("Failed to delete data")}).then(v)},children:"Yes"})]})]})},br=()=>{const f=Xe(u=>u.error),p=Xe(u=>u.reset),o=Xe(u=>u.clearError),v=Xe(u=>u.closeSnackbar),g=Xe(u=>u.isSnackbarOpen);return Nt.useEffect(()=>p,[p]),M.jsx(jt,{open:g(),autoHideDuration:6e3,onClose:v,TransitionProps:{onExited:o},children:M.jsx(xt,{onClose:v,severity:f?"error":"success",sx:{width:"100%"},children:f||"Data successfully deleted"})})},gr=Tt(M.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}));var ht={exports:{}},wr=ht.exports,kt;function Sr(){return kt||(kt=1,(function(f,p){(function(o,v){v()})(wr,function(){function o(a,w){return typeof w>"u"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function v(a,w,P){var L=new XMLHttpRequest;L.open("GET",a),L.responseType="blob",L.onload=function(){k(L.response,w,P)},L.onerror=function(){console.error("could not download file")},L.send()}function g(a){var w=new XMLHttpRequest;w.open("HEAD",a,!1);try{w.send()}catch{}return 200<=w.status&&299>=w.status}function u(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(w)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof pt=="object"&&pt.global===pt?pt:void 0,j=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),k=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!j?function(a,w,P){var L=s.URL||s.webkitURL,Y=document.createElement("a");w=w||a.name||"download",Y.download=w,Y.rel="noopener",typeof a=="string"?(Y.href=a,Y.origin===location.origin?u(Y):g(Y.href)?v(a,w,P):u(Y,Y.target="_blank")):(Y.href=L.createObjectURL(a),setTimeout(function(){L.revokeObjectURL(Y.href)},4e4),setTimeout(function(){u(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(a,w,P){if(w=w||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(o(a,P),w);else if(g(a))v(a,w,P);else{var L=document.createElement("a");L.href=a,L.target="_blank",setTimeout(function(){u(L)})}}:function(a,w,P,L){if(L=L||open("","_blank"),L&&(L.document.title=L.document.body.innerText="downloading..."),typeof a=="string")return v(a,w,P);var Y=a.type==="application/octet-stream",G=/constructor/i.test(s.HTMLElement)||s.safari,V=/CriOS\/[\d]+/.test(navigator.userAgent);if((V||Y&&G||j)&&typeof FileReader<"u"){var Q=new FileReader;Q.onloadend=function(){var N=Q.result;N=V?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),L?L.location.href=N:location=N,L=null},Q.readAsDataURL(a)}else{var Ae=s.URL||s.webkitURL,ve=Ae.createObjectURL(a);L?L.location=ve:location.href=ve,L=null,setTimeout(function(){Ae.revokeObjectURL(ve)},4e4)}});s.saveAs=k.saveAs=k,f.exports=k})})(ht)),ht.exports}var Or=Sr();const Er=()=>{const f=At(o=>o.setAndroidError),p=Jt(o=>o.openError);return M.jsxs(M.Fragment,{children:[M.jsx(ut,{variant:"outlined",startIcon:M.jsx(gr,{}),onClick:async()=>{try{const o=await yr(),g=`activities_${Gt().format("YYYYMMDDHHmm")}.json`;window.Android?window.Android.export(await o.text(),g)==="error"&&f():Or.saveAs(o,g)}catch(o){console.error(o),p("Failed to export data.")}},children:"Export"}),window.Android&&M.jsx(Ar,{})]})},At=_t(f=>({androidError:!1,setAndroidError:()=>f({androidError:!0}),clearAndroidError:()=>f({androidError:!1})})),Ar=()=>{const f=At(o=>o.androidError),p=At(o=>o.clearAndroidError);return Nt.useEffect(()=>p,[p]),M.jsx(jt,{open:f,autoHideDuration:6e3,onClose:p,children:M.jsx(xt,{onClose:p,severity:"error",sx:{width:"100%"},children:"Failed to export"})})},Tr=Tt(M.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})),_r=()=>{const f=Nr();return M.jsxs(M.Fragment,{children:[M.jsxs(ut,{variant:"outlined",component:"label",startIcon:M.jsx(Tr,{}),"aria-label":"Import",children:["Import",M.jsx("input",{type:"file",hidden:!0,accept:".json",onChange:f})]}),M.jsx(jr,{})]})},Nr=()=>{const f=rt(v=>v.reset),p=rt(v=>v.openResult),o=rt(v=>v.setError);return async v=>{f();const g=v.target.files?.[0];g?await dr(g).catch(u=>{console.error(u),o("Failed to import data.")}):o("Invalid file."),p(),v.target.value=""}},rt=_t(f=>({resultOpen:!1,error:"",reset:()=>f({resultOpen:!1,error:""}),clearError:()=>f({error:""}),openResult:()=>f({resultOpen:!0}),closeResult:()=>f({resultOpen:!1}),setError:p=>f({error:p})})),jr=()=>{const f=rt(u=>u.reset),p=rt(u=>u.resultOpen),o=rt(u=>u.error),v=rt(u=>u.closeResult),g=rt(u=>u.clearError);return Nt.useEffect(()=>f,[f]),M.jsx(jt,{open:p,autoHideDuration:6e3,onClose:v,TransitionProps:{onExited:g},children:M.jsx(xt,{onClose:v,severity:o?"error":"success",sx:{width:"100%"},children:o||"Data successfully imported."})})},Rr=()=>{const{pathname:f}=qt();return M.jsx(Ht,{open:f.endsWith("/storage"),children:M.jsx(xr,{})})},xr=()=>M.jsxs(yt,{container:!0,minHeight:"100%",justifyContent:"space-between",direction:"column",children:[M.jsxs(Ct,{children:[M.jsx(Yt,{headline:"Storage"}),M.jsx(yt,{container:!0,sx:{p:1},direction:"column",children:M.jsxs(Ct,{sx:{ml:1,mr:1},children:[M.jsx(It,{variant:"body1",children:"All the data is stored only on your device."}),M.jsx(It,{variant:"body1",children:"It is recommended to regularly back up your data."}),M.jsxs(yt,{container:!0,justifyContent:"space-evenly",sx:{mt:4},children:[M.jsx(Er,{}),M.jsx(_r,{})]})]})})]}),M.jsx(yt,{container:!0,justifyContent:"center",children:M.jsx(hr,{})})]});export{Rr as StorageModal};
//# sourceMappingURL=StorageModal-CZcAukU4.js.map
