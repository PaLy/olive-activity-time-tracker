import{c as I,j as t,i as g,k as f,r as h,M as T,B as b,m as D,P as y,e as p,I as k,u as v}from"./index-DE89N4ny.js";import{D as C,S as M}from"./DateTimeRangePicker-DgYNcG8x.js";import{u as E,M as B,S as P,T as x,G as A,B as F}from"./Slide-ChgE62Io.js";import{u as G,a as R,b as z,g as H}from"./hooks-DnkQxRD8.js";import"./listItemTextClasses-Cu445j8s.js";import"./DialogContent-CVj3DIFa.js";const N=I(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),X=()=>{const i=g(),a=parseInt(i.intervalID??""),n=f(()=>H(a).catch(c=>{console.error(c),v.getState().openError("Interval not found")}),[a]);return n?t.jsx(O,{editIntervalData:n}):null},O=i=>{const{editIntervalData:a}=i,{interval:n,activityFullName:c}=a,[e,o]=h.useState({start:n.start,startError:"",end:n.end,endError:""}),u=G(r=>r.openDeleteIntervalConfirmation),d={start:e.start,end:e.end},m=R(d.start,d.end,!0),l=E(),s=e.end===T,{save:S,saving:j}=_(a,d);return t.jsx(t.Fragment,{children:t.jsx(B,{open:!0,onClose:()=>l(-1),children:t.jsx(P,{direction:"up",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:t.jsx(b,{sx:{position:"absolute",bottom:0,left:0,right:0},children:t.jsx(D,{maxWidth:"sm",disableGutters:!0,children:t.jsxs(y,{square:!0,sx:{p:2,borderRadius:"32px 32px 0 0"},children:[t.jsx(x,{variant:"h6",sx:{m:1},children:c}),t.jsx(C,{startTime:p(e.start),setStartTime:r=>o({...e,start:+r}),startTimeError:e.startError,setStartTimeError:r=>o({...e,startError:r}),endTime:p(e.end),setEndTime:r=>o({...e,end:+r}),endTimeError:e.endError,setEndTimeError:r=>o({...e,endError:r}),omitEndTimePicker:s}),t.jsx(x,{sx:{m:1},children:m}),t.jsxs(A,{container:!0,justifyContent:"space-between",children:[t.jsx(k,{"aria-label":"delete",onClick:()=>u(n.id),children:t.jsx(N,{})}),t.jsx(F,{variant:"text",startIcon:t.jsx(M,{}),onClick:S,disabled:j||!!e.startError||!!e.endError,children:"Save"})]})]})})})})})})},_=(i,a)=>{const{interval:n}=i,{start:c,end:e}=a,o=v(s=>s.openSuccess),u=v(s=>s.openError),d=E(),[m,l]=h.useState(!1);return{save:async()=>(l(!0),z(n.id,c,e).then(()=>{o("Interval successfully changed"),d(-1)}).finally(()=>l(!1)).catch(s=>{console.error(s),u("Failed to update interval")})),saving:m}};export{X as EditInterval};
//# sourceMappingURL=EditInterval-dcZjbApG.js.map
